{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{405:function(s,t,a){\"use strict\";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"h2\",{attrs:{id:\"解决开发环境的跨域问题\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#解决开发环境的跨域问题\"}},[s._v(\"#\")]),s._v(\" 解决开发环境的跨域问题\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"开发环境的跨域\")])]),s._v(\" \"),t(\"p\",[s._v(\"开发环境的跨域，也就是在**\"),t(\"code\",[s._v(\"vue-cli脚手架环境\")]),t(\"strong\",[s._v(\"下开发启动服务时，我们访问接口所遇到的跨域问题，vue-cli为我们在本地\")]),t(\"code\",[s._v(\"开启了一个服务\")]),t(\"strong\",[s._v(\",可以通过这个服务帮我们\")]),t(\"code\",[s._v(\"代理请求\")]),s._v(\"**,解决跨域问题\")]),s._v(\" \"),t(\"p\",[s._v(\"这就是vue-cli配置\"),t(\"strong\",[s._v(\"webpack的反向代理\")])]),s._v(\" \"),t(\"p\",[s._v(\"![image-20200811022013103](G:/web 百度网盘/03、第三章 HR-saas中台管理项目/资源/讲义/assets/image-20200811022013103.png)\")]),s._v(\" \"),t(\"blockquote\",[t(\"p\",[s._v(\"采用vue-cli的代理配置\")])]),s._v(\" \"),t(\"p\",[s._v(\"vue-cli的配置文件即**\"),t(\"code\",[s._v(\"vue.config.js\")]),s._v(\"**,这里有我们需要的 \"),t(\"a\",{attrs:{href:\"https://cli.vuejs.org/zh/config/#devserver-proxy\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"代理选项\"),t(\"OutboundLink\")],1)]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[s._v(\"module\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exports \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"devServer\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n   \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 代理配置\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"proxy\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 这里的api 表示如果我们的请求地址有/api的时候,就出触发代理机制\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// localhost:8888/api/abc  => 代理给另一个服务器\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 本地的前端  =》 本地的后端  =》 代理我们向另一个服务器发请求 （行得通）\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 本地的前端  =》 另外一个服务器发请求 （跨域 行不通）\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token string-property property\"}},[s._v(\"'/api'\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"target\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'www.baidu.com'\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 我们要代理的地址\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"changeOrigin\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 是否跨域 需要设置此值为true 才可以让本地服务代理我们发出请求\")]),s._v(\"\\n         \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 路径重写\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"pathRewrite\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 重新路由  localhost:8888/api/login  => www.baidu.com/api/login\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token string-property property\"}},[s._v(\"'^/api'\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"''\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 假设我们想把 localhost:8888/api/login 变成www.baidu.com/login 就需要这么做 \")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),t(\"br\")])]),t(\"p\",[s._v(\"以上就是我们在vue-cli项目中配置的代理设置\")]),s._v(\" \"),t(\"blockquote\",[t(\"p\",[s._v(\"接下来,我们在代码中将要代理的后端地址变成 \"),t(\"a\",{attrs:{href:\"http://ihrm-java.itheima.net\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"后端接口地址\"),t(\"OutboundLink\")],1)])]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 代理跨域的配置\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"proxy\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 当我们的本地的请求 有/api的时候，就会代理我们的请求地址向另外一个服务器发出请求\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token string-property property\"}},[s._v(\"'/api'\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"target\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'http://ihrm-java.itheima.net/'\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 跨域请求的地址\")]),s._v(\"\\n        \"),t(\"span\",{pre:!0,attrs:{class:\"token literal-property property\"}},[s._v(\"changeOrigin\")]),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"true\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// 只有这个值为true的情况下 才表示开启跨域\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\")])]),t(\"p\",[t(\"strong\",[t(\"code\",[s._v(\"本节注意\")])]),s._v(\"：我们并没有进行**\"),t(\"code\",[s._v(\"pathRewrite\")]),t(\"strong\",[s._v(\",因为后端接口就是\")]),t(\"code\",[s._v(\"ihrm-java.itheima.net/api\")]),s._v(\"**这种格式,所以不需要重写\")]),s._v(\" \"),t(\"p\",[s._v(\"**\"),t(\"code\",[s._v(\"vue.config.js\")]),s._v(\"**的改动如果要生效,需要进行重启服务\")]),s._v(\" \"),t(\"p\",[s._v(\"同时，还需要注意的是，我们同时需要注释掉 mock的加载，因为mock-server会导致代理服务的异常\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-js line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"// before: require('./mock/mock-server.js'),  // 注释mock-server加载\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"p\",[t(\"strong\",[s._v(\"生产环境的跨域\")])]),s._v(\" \"),t(\"p\",[s._v(\"生产环境表示我们已经开发完成项目，将项目部署到了服务器上,这时已经没有了vue-cli脚手架的**\"),t(\"code\",[s._v(\"辅助\")]),t(\"strong\",[s._v(\"了，我们只是把打包好的\")]),t(\"code\",[s._v(\"html+js+css\")]),t(\"strong\",[s._v(\"交付运维人员，放到\")]),t(\"code\",[s._v(\"Nginx\")]),t(\"strong\",[s._v(\"服务器而已,所以此时需要借助\")]),t(\"code\",[s._v(\"Nginx\")]),s._v(\"**的反向代理来进行\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"server\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 监听9099端口\")]),s._v(\"\\n    listen \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9099\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 本地的域名是localhost\")]),s._v(\"\\n    server_name localhost\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#凡是localhost:9099/api这个样子的，都转发到真正的服务端地址http://baidu.com\")]),s._v(\"\\n    location ^~ /api \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        proxy_pass http://baidu.com\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"    \\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\")])]),t(\"p\",[t(\"strong\",[t(\"code\",[s._v(\"注意\")])]),s._v(\":这里的操作一般由运维人员完成,需要前端进行操作,这里我们进行一下简单了解\")]),s._v(\" \"),t(\"p\",[s._v(\"更多正向代理和反向代理知识,请阅读这篇文章\"),t(\"a\",{attrs:{href:\"https://www.cnblogs.com/ysocean/p/9392908.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"Nginx反向代理\"),t(\"OutboundLink\")],1)]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"提交代码\")])]),s._v(\" \"),t(\"p\",[t(\"strong\",[t(\"code\",[s._v(\"本节注意\")])]),s._v(\"：我们并没有进行**\"),t(\"code\",[s._v(\"pathRewrite\")]),t(\"strong\",[s._v(\",因为后端接口就是\")]),t(\"code\",[s._v(\"ihrm-java.itheima.net/api\")]),s._v(\"**这种格式,所以不需要重写\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[t(\"code\",[s._v(\"本节任务\")])]),s._v(\"： 配置vue-cli的反向代理，实现后端接口的跨域访问\")])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}